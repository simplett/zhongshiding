{"remainingRequest":"/Users/simplett/Desktop/Vrp3d-Net-Vue/node_modules/babel-loader/lib/index.js!/Users/simplett/Desktop/Vrp3d-Net-Vue/src/ajax/request.js","dependencies":[{"path":"/Users/simplett/Desktop/Vrp3d-Net-Vue/src/ajax/request.js","mtime":1585837859094},{"path":"/Users/simplett/Desktop/Vrp3d-Net-Vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/simplett/Desktop/Vrp3d-Net-Vue/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UiOwoKLyoqDQogKiBheGlvc+WwgeijhQ0KICog6K+35rGC5oum5oiq44CB5ZON5bqU5oum5oiq44CB6ZSZ6K+v57uf5LiA5aSE55CGDQogKi8KaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKaW1wb3J0IHJvdXRlciBmcm9tICcuLi9yb3V0ZXIvaW5kZXgnOwppbXBvcnQgc3RvcmUgZnJvbSAnLi4vc3RvcmUvaW5kZXgnOwppbXBvcnQgeyBNZXNzYWdlIH0gZnJvbSAnZWxlbWVudC11aSc7Ci8qKg0KICog5o+Q56S65Ye95pWwDQogKi8KCnZhciB0aXAgPSBmdW5jdGlvbiB0aXAobXNnLCB0eXBlKSB7CiAgTWVzc2FnZSh7CiAgICBtZXNzYWdlOiBtc2csCiAgICB0eXBlOiB0eXBlCiAgfSk7Cn07Ci8qKg0KICog6Lez6L2s55m75b2V6aG1DQogKiDmkLrluKblvZPliY3pobXpnaLot6/nlLHvvIzku6XmnJ/lnKjnmbvlvZXpobXpnaLlrozmiJDnmbvlvZXlkI7ov5Tlm57lvZPliY3pobXpnaINCiAqLwoKCnZhciB0b0xvZ2luID0gZnVuY3Rpb24gdG9Mb2dpbigpIHsKICByb3V0ZXIucmVwbGFjZSh7CiAgICBwYXRoOiAnL2xvZ2luJywKICAgIHF1ZXJ5OiB7CiAgICAgIHJlZGlyZWN0OiByb3V0ZXIuY3VycmVudFJvdXRlLmZ1bGxQYXRoCiAgICB9CiAgfSk7Cn07Ci8qKg0KICogNTAw5o+Q56S6DQogKi8KCgp2YXIgY29kZU1lc3NhZyA9IGZ1bmN0aW9uIGNvZGVNZXNzYWcobWV0YSkgewogIHN3aXRjaCAobWV0YS5jb2RlKSB7CiAgICBjYXNlICI1MDAiOgogICAgICB0aXAobWV0YS5tZXNzYWdlLCAnd2FybmluZycpOwogICAgICBicmVhazsKICB9Cn07Ci8qKg0KICog6K+35rGC5aSx6LSl5ZCO55qE6ZSZ6K+v57uf5LiA5aSE55CGDQogKiBAcGFyYW0ge051bWJlcn0gc3RhdHVzIOivt+axguWksei0peeahOeKtuaAgeeggQ0KICovCgoKdmFyIGVycm9ySGFuZGxlID0gZnVuY3Rpb24gZXJyb3JIYW5kbGUoc3RhdHVzLCBvdGhlcikgewogIC8vIOeKtuaAgeeggeWIpOaWrQogIHN3aXRjaCAoc3RhdHVzKSB7CiAgICAvLyA0MDE6IOacqueZu+W9leeKtuaAge+8jOi3s+i9rOeZu+W9lemhtQogICAgY2FzZSA0MDE6CiAgICAgIHRvTG9naW4oKTsKICAgICAgYnJlYWs7CiAgICAvLyA0MDMgdG9rZW7ov4fmnJ8KICAgIC8vIOa4hemZpHRva2Vu5bm26Lez6L2s55m75b2V6aG1CgogICAgY2FzZSA0MDM6CiAgICAgIHRpcCgn55m75b2V6L+H5pyf77yM6K+36YeN5paw55m75b2VJywgJ3dhcm5pbmcnKTsKICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3Rva2VuJyk7CiAgICAgIHN0b3JlLmNvbW1pdCgnbG9naW5TdWNjZXNzJywgbnVsbCk7CiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgIHRvTG9naW4oKTsKICAgICAgfSwgMTAwMCk7CiAgICAgIGJyZWFrOwogICAgLy8gNDA06K+35rGC5LiN5a2Y5ZyoCgogICAgY2FzZSA0MDQ6CiAgICAgIHRpcCgn6K+35rGC55qE6LWE5rqQ5LiN5a2Y5ZyoJywgJ3dhcm5pbmcnKTsKICAgICAgYnJlYWs7CgogICAgZGVmYXVsdDoKICAgICAgY29uc29sZS5sb2cob3RoZXIpOwogICAgICBzdG9yZS5jb21taXQoJ2NoYW5nZU5ldHdvcmsnLCBmYWxzZSk7CiAgICAgIHRpcCgn6L+e5o6l5Yiw5pyN5Yqh5Zmo5aSx6LSlJywgJ3dhcm5pbmcnKTsKICB9Cn07IC8vIOWIm+W7umF4aW9z5a6e5L6LCgoKdmFyIGluc3RhbmNlID0gYXhpb3MuY3JlYXRlKHsKICB0aW1lb3V0OiAxMDAwICogMTIKfSk7IC8vIOiuvue9rnBvc3Tor7fmsYLlpLQKCmluc3RhbmNlLmRlZmF1bHRzLmhlYWRlcnMucG9zdFsnQ29udGVudC1UeXBlJ10gPSAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJzsKLyoqDQogKiDor7fmsYLmi6bmiKrlmagNCiAqIOavj+asoeivt+axguWJje+8jOWmguaenOWtmOWcqHRva2Vu5YiZ5Zyo6K+35rGC5aS05Lit5pC65bimdG9rZW4NCiAqLwoKaW5zdGFuY2UuaW50ZXJjZXB0b3JzLnJlcXVlc3QudXNlKGZ1bmN0aW9uIChjb25maWcpIHsKICAvLyDnmbvlvZXmtYHnqIvmjqfliLbkuK3vvIzmoLnmja7mnKzlnLDmmK/lkKblrZjlnKh0b2tlbuWIpOaWreeUqOaIt+eahOeZu+W9leaDheWGtQogIC8vIOS9huaYr+WNs+S9v3Rva2Vu5a2Y5Zyo77yM5Lmf5pyJ5Y+v6IO9dG9rZW7mmK/ov4fmnJ/nmoTvvIzmiYDku6XlnKjmr4/mrKHnmoTor7fmsYLlpLTkuK3mkLrluKZ0b2tlbgogIC8vIOWQjuWPsOagueaNruaQuuW4pueahHRva2Vu5Yik5pat55So5oi355qE55m75b2V5oOF5Ya177yM5bm26L+U5Zue57uZ5oiR5Lus5a+55bqU55qE54q25oCB56CBCiAgLy8g6ICM5ZCO5oiR5Lus5Y+v5Lul5Zyo5ZON5bqU5oum5oiq5Zmo5Lit77yM5qC55o2u54q25oCB56CB6L+b6KGM5LiA5Lqb57uf5LiA55qE5pON5L2c44CCCiAgdmFyIHRva2VuID0gc3RvcmUuc3RhdGUudG9rZW47CiAgdG9rZW4gJiYgKGNvbmZpZy5oZWFkZXJzLkF1dGhvcml6YXRpb24gPSB0b2tlbik7CiAgcmV0dXJuIGNvbmZpZzsKfSwgZnVuY3Rpb24gKGVycm9yKSB7CiAgcmV0dXJuIFByb21pc2UuZXJyb3IoZXJyb3IpOwp9KTsgLy8g5ZON5bqU5oum5oiq5ZmoCgppbnN0YW5jZS5pbnRlcmNlcHRvcnMucmVzcG9uc2UudXNlKCAvLyDor7fmsYLmiJDlip8KZnVuY3Rpb24gKHJlcykgewogIHJldHVybiByZXMuc3RhdHVzID09PSAyMDAgPyBQcm9taXNlLnJlc29sdmUocmVzLmRhdGEpIDogUHJvbWlzZS5yZWplY3QocmVzKTsKfSwgLy8g6K+35rGC5aSx6LSlCmZ1bmN0aW9uIChlcnJvcikgewogIHZhciByZXNwb25zZSA9IGVycm9yLnJlc3BvbnNlOwoKICBpZiAocmVzcG9uc2UpIHsKICAgIC8vIOivt+axguW3suWPkeWHuu+8jOS9huaYr+S4jeWcqDJ4eOeahOiMg+WbtAogICAgZXJyb3JIYW5kbGUocmVzcG9uc2Uuc3RhdHVzLCByZXNwb25zZS5kYXRhLm1lc3NhZ2UpOwogICAgcmV0dXJuIFByb21pc2UucmVqZWN0KHJlc3BvbnNlKTsKICB9IGVsc2UgewogICAgLy8g5aSE55CG5pat572R55qE5oOF5Ya1CiAgICAvLyBlZzror7fmsYLotoXml7bmiJbmlq3nvZHml7bvvIzmm7TmlrBzdGF0ZeeahG5ldHdvcmvnirbmgIEKICAgIC8vIG5ldHdvcmvnirbmgIHlnKhhcHAudnVl5Lit5o6n5Yi2552A5LiA5Liq5YWo5bGA55qE5pat572R5o+Q56S657uE5Lu255qE5pi+56S66ZqQ6JePCiAgICAvLyDlhbPkuo7mlq3nvZHnu4Tku7bkuK3nmoTliLfmlrDph43mlrDojrflj5bmlbDmja7vvIzkvJrlnKjmlq3nvZHnu4Tku7bkuK3or7TmmI4KICAgIHN0b3JlLmNvbW1pdCgnY2hhbmdlTmV0d29yaycsIGZhbHNlKTsgLy8gdGlwKCfor7fmsYLplJnor68nLCAnZXJyb3InKTsKICB9Cn0pOyAvLyBleHBvcnQgZGVmYXVsdCBpbnN0YW5jZTsKLy/liKTmlq3mmK/lkKbmnKrnmbvlvZUKCmZ1bmN0aW9uIG5vdExvZ2luKHR5cGUpIHsKICBpZiAoJ1VTRVJfTk9UX0xPR0dFRF9JTicgPT09IHR5cGUpIHsKICAgIHRpcCgn5pyq55m75b2VJywgJ2Vycm9yJyk7CiAgICB0b0xvZ2luKCk7CiAgICByZXR1cm4gZmFsc2U7CiAgfSBlbHNlIHsKICAgIHJldHVybiB0cnVlOwogIH0KfSAvL2dldOivt+axggoKCmZ1bmN0aW9uIGdldCh1cmwpIHsKICB2YXIgcGFyYW1zID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiB7fTsKCiAgaWYgKCF1cmwpIHsKICAgIHRpcCgn6K+35rGC6ZSZ6K+vKOaXoGFwaSknLCAnZXJyb3InKTsKICAgIHJldHVybiBmYWxzZTsKICB9CgogIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICBpbnN0YW5jZS5nZXQodXJsLCB7CiAgICAgIHBhcmFtczogcGFyYW1zCiAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICBpZiAobm90TG9naW4ocmVzcG9uc2UuZGF0YS5pbmZvKSkgewogICAgICAgIGNvZGVNZXNzYWcocmVzcG9uc2UubWV0YSk7CiAgICAgICAgcmVzb2x2ZShyZXNwb25zZSk7CiAgICAgIH0KICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgcmVqZWN0KGVycik7CiAgICB9KTsKICB9KTsKfSAvL3Bvc3Tor7fmsYIKCgpmdW5jdGlvbiBwb3N0KHVybCkgewogIHZhciBkYXRhID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiB7fTsKICB2YXIgcGFyYW1zID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgPyBhcmd1bWVudHNbMl0gOiB1bmRlZmluZWQ7CgogIGlmICghdXJsKSB7CiAgICB0aXAoJ+ivt+axgumUmeivryjml6BhcGkpJywgJ2Vycm9yJyk7CiAgICByZXR1cm4gZmFsc2U7CiAgfQoKICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgaW5zdGFuY2UucG9zdCh1cmwsIGRhdGEsIHsKICAgICAgcGFyYW1zOiBwYXJhbXMKICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgIGlmIChub3RMb2dpbihyZXNwb25zZS5kYXRhLmluZm8pKSB7CiAgICAgICAgY29kZU1lc3NhZyhyZXNwb25zZS5tZXRhKTsKICAgICAgICByZXNvbHZlKHJlc3BvbnNlKTsKICAgICAgfQogICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICByZWplY3QoZXJyKTsKICAgIH0pOwogIH0pOwp9CgpleHBvcnQgZGVmYXVsdCB7CiAgZ2V0OiBnZXQsCiAgcG9zdDogcG9zdAp9Ow=="},{"version":3,"sources":["/Users/simplett/Desktop/Vrp3d-Net-Vue/src/ajax/request.js"],"names":["axios","router","store","Message","tip","msg","type","message","toLogin","replace","path","query","redirect","currentRoute","fullPath","codeMessag","meta","code","errorHandle","status","other","localStorage","removeItem","commit","setTimeout","console","log","instance","create","timeout","defaults","headers","post","interceptors","request","use","config","token","state","Authorization","error","Promise","response","res","resolve","data","reject","notLogin","get","url","params","then","info","catch","err"],"mappings":"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","sourcesContent":["/**\r\n * axios封装\r\n * 请求拦截、响应拦截、错误统一处理\r\n */\r\nimport axios from 'axios';\r\nimport router from '../router/index';\r\nimport store from '../store/index';\r\nimport {Message} from 'element-ui';\r\n\r\n/**\r\n * 提示函数\r\n */\r\nconst tip = (msg, type) => {\r\n    Message({\r\n        message: msg,\r\n        type: type\r\n    });\r\n}\r\n\r\n/**\r\n * 跳转登录页\r\n * 携带当前页面路由，以期在登录页面完成登录后返回当前页面\r\n */\r\nconst toLogin = () => {\r\n    router.replace({\r\n        path: '/login',\r\n        query: {\r\n            redirect: router.currentRoute.fullPath\r\n        }\r\n    });\r\n}\r\n\r\n/**\r\n * 500提示\r\n */\r\nconst codeMessag = (meta) => {\r\n    switch (meta.code) {\r\n        case \"500\":\r\n            tip(meta.message, 'warning');\r\n            break;\r\n    }\r\n}\r\n\r\n/**\r\n * 请求失败后的错误统一处理\r\n * @param {Number} status 请求失败的状态码\r\n */\r\nconst errorHandle = (status, other) => {\r\n    // 状态码判断\r\n    switch (status) {\r\n        // 401: 未登录状态，跳转登录页\r\n        case 401:\r\n            toLogin();\r\n            break;\r\n        // 403 token过期\r\n        // 清除token并跳转登录页\r\n        case 403:\r\n            tip('登录过期，请重新登录', 'warning');\r\n            localStorage.removeItem('token');\r\n            store.commit('loginSuccess', null);\r\n            setTimeout(() => {\r\n                toLogin();\r\n            }, 1000);\r\n            break;\r\n        // 404请求不存在\r\n        case 404:\r\n            tip('请求的资源不存在', 'warning');\r\n            break;\r\n        default:\r\n            console.log(other);\r\n            store.commit('changeNetwork', false);\r\n            tip('连接到服务器失败', 'warning');\r\n    }\r\n}\r\n\r\n// 创建axios实例\r\nvar instance = axios.create({timeout: 1000 * 12});\r\n// 设置post请求头\r\ninstance.defaults.headers.post['Content-Type'] = 'application/x-www-form-urlencoded';\r\n/**\r\n * 请求拦截器\r\n * 每次请求前，如果存在token则在请求头中携带token\r\n */\r\ninstance.interceptors.request.use(\r\n    config => {\r\n        // 登录流程控制中，根据本地是否存在token判断用户的登录情况\r\n        // 但是即使token存在，也有可能token是过期的，所以在每次的请求头中携带token\r\n        // 后台根据携带的token判断用户的登录情况，并返回给我们对应的状态码\r\n        // 而后我们可以在响应拦截器中，根据状态码进行一些统一的操作。\r\n        const token = store.state.token;\r\n        token && (config.headers.Authorization = token);\r\n        return config;\r\n    },\r\n    error => Promise.error(error))\r\n\r\n// 响应拦截器\r\ninstance.interceptors.response.use(\r\n    // 请求成功\r\n    res => res.status === 200 ? Promise.resolve(res.data) : Promise.reject(res),\r\n    // 请求失败\r\n    error => {\r\n        const {response} = error;\r\n        if (response) {\r\n            // 请求已发出，但是不在2xx的范围\r\n            errorHandle(response.status, response.data.message);\r\n            return Promise.reject(response);\r\n        } else {\r\n            // 处理断网的情况\r\n            // eg:请求超时或断网时，更新state的network状态\r\n            // network状态在app.vue中控制着一个全局的断网提示组件的显示隐藏\r\n            // 关于断网组件中的刷新重新获取数据，会在断网组件中说明\r\n            store.commit('changeNetwork', false);\r\n            // tip('请求错误', 'error');\r\n        }\r\n    });\r\n\r\n// export default instance;\r\n\r\n//判断是否未登录\r\nfunction notLogin(type) {\r\n    if ('USER_NOT_LOGGED_IN'===type){\r\n        tip('未登录', 'error');\r\n        toLogin()\r\n        return false\r\n    }else{\r\n        return  true\r\n    }\r\n}\r\n\r\n//get请求\r\nfunction get(url, params = {}) {\r\n    if (!url) {\r\n        tip('请求错误(无api)', 'error');\r\n        return false\r\n    }\r\n    return new Promise((resolve, reject) => {\r\n        instance.get(url, {\r\n            params: params\r\n        })\r\n            .then(response => {\r\n                if(notLogin(response.data.info)) {\r\n                    codeMessag(response.meta)\r\n                    resolve(response)\r\n                }\r\n            })\r\n            .catch(err => {\r\n                reject(err)\r\n            })\r\n    })\r\n}\r\n\r\n//post请求\r\nfunction post(url, data = {},params) {\r\n    if (!url) {\r\n        tip('请求错误(无api)', 'error');\r\n        return false\r\n    }\r\n    return new Promise((resolve, reject) => {\r\n        instance.post(url, data,{params})\r\n            .then(response => {\r\n                if(notLogin(response.data.info)) {\r\n                    codeMessag(response.meta)\r\n                    resolve(response)\r\n                }\r\n            })\r\n            .catch(err => {\r\n                reject(err)\r\n            })\r\n    })\r\n}\r\n\r\nexport default {\r\n    get,\r\n    post\r\n}"]}]}